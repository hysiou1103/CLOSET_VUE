(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-433519de"],{1799:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:a===t.pagination.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},n=[],i={name:"Pagenation",props:["pagination"],methods:{changePage:function(t){this.$emit("changePage",t)}}},r=i,c=e("2877"),l=Object(c["a"])(r,s,n,!1,null,null,null);a["a"]=l.exports},"466d":function(t,a,e){"use strict";var s=e("d784"),n=e("825a"),i=e("50c4"),r=e("577e"),c=e("1d80"),l=e("8aa5"),o=e("14c3");s("match",(function(t,a,e){return[function(a){var e=c(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,e):new RegExp(a)[t](r(e))},function(t){var s=n(this),c=r(t),u=e(a,s,c);if(u.done)return u.value;if(!s.global)return o(s,c);var d=s.unicode;s.lastIndex=0;var f,p=[],g=0;while(null!==(f=o(s,c))){var v=r(f[0]);p[g]=v,""===v&&(s.lastIndex=l(c,i(s.lastIndex),d)),g++}return 0===g?null:p}]}))},ed84:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"products py-4"},[e("div",{staticClass:"container preFadein productsWrap"},[e("div",{staticClass:"row"},[e("nav",{staticClass:"col-md-3"},[e("ul",{staticClass:"sideList pl-0",on:{click:function(a){return a.preventDefault(),t.getFilter.apply(null,arguments)}}},[e("li",[e("a",{staticClass:"nav-link",class:{active:"All"===t.filter},attrs:{href:"#"}},[t._v("All")])]),e("li",[e("a",{staticClass:"nav-link",class:{active:"Tops"===t.filter},attrs:{href:"#"}},[t._v("Tops")])]),e("li",[e("a",{staticClass:"nav-link",class:{active:"Bottoms"===t.filter},attrs:{href:"#"}},[t._v("Bottoms")])]),e("li",[e("a",{staticClass:"nav-link",class:{active:"Dress"===t.filter},attrs:{href:"#"}},[t._v("Dress")])]),e("li",[e("a",{staticClass:"nav-link text-center",class:{active:"Dress"===t.filter},attrs:{href:"#"}},[t._v("Dress")])]),e("li",[e("a",{staticClass:"nav-link",class:{active:"Outwear"===t.filter},attrs:{href:"#"}},[t._v("Outwear")])])])]),e("section",{staticClass:"col-md-9 products-section"},[0!==t.filterProducts.length?e("ul",{staticClass:"d-flex flex-wrap products-list"},t._l(t.filterProducts.slice(t.count,t.count+9),(function(a){return e("li",{key:a.id},[e("router-link",{attrs:{to:{name:"productDetail",params:{productId:""+a.id}}}},[e("div",{staticClass:"card"},[e("div",{staticClass:"img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.imageUrl,expression:"item.imageUrl"}],staticClass:"card-img-top",attrs:{alt:"product photo"}}),e("button",{staticClass:"btn btn-outline-light",attrs:{type:"button"}},[t._v(" More ")])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"\n                      card-title\n                      text-primary\n                      d-flex\n                      justify-content-between\n                    "},[e("div",{staticClass:"productTitle h5"},[t._v(" "+t._s(a.title)+" ")]),t.favItemsId.includes(a.id)?e("a",{staticClass:"fas fa-heart nav-link pr-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeFav(a)}}}):e("a",{staticClass:"far fa-heart nav-link pr-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addFav(a)}}})]),e("div",{staticClass:"\n                      card-text\n                      d-flex\n                      justify-content-between\n                      align-items-center\n                    "},[e("p",{staticClass:"h5 text-danger"},[t._v(" "+t._s(t._f("currency")(a.price))+"元 ")]),a.origin_price?e("div",{staticClass:"text-secondary"},[e("s",[t._v(t._s(t._f("currency")(a.origin_price))+"元")])]):t._e()])])])])],1)})),0):e("div",{staticClass:"d-flex justify-content-center align-items-center wrong-alert"},[e("h5",[t._v("很抱歉! 找不到您想要的商品")])]),0!==t.pagination.total_pages?e("Pagination",{attrs:{pagination:t.pagination},on:{changePage:t.changePage}}):t._e()],1)])])])},n=[],i=e("1da1"),r=(e("96cf"),e("99af"),e("4de4"),e("a434"),e("ac1f"),e("466d"),e("1799")),c={name:"Products",components:{Pagination:r["a"]},data:function(){return{allProducts:[],favItems:JSON.parse(localStorage.getItem("favItems"))||[],favItemsId:JSON.parse(localStorage.getItem("favItemsId"))||[],filter:"",pagination:{total_pages:0,current_page:1,has_next:!1,has_pre:!1},count:0}},methods:{getProducts:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t,e.$store.dispatch("isLoading",!0),s="".concat("https://vue-course-api.hexschool.io","/api/").concat("storepract","/products/all"),a.prev=3,a.next=6,e.$http.get(s);case 6:n=a.sent,n.data.success?e.allProducts=n.data.products.filter((function(t){return t.is_enabled})):e.$bus.$emit("messagePush",n.data.message,"warning"),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),console.log(a.t0);case 13:e.$store.dispatch("isLoading",!1),e.$nextTick((function(){document.querySelector(".productsWrap").classList.add("fadeIn")}));case 15:case"end":return a.stop()}}),a,null,[[3,10]])})))()},getFilter:function(t){var a=this;a.pagination.current_page=1,a.count=0,"A"===t.target.nodeName&&(a.filter=t.target.text,a.$route.query.cate!==a.filter&&a.$router.push("/products?cate=".concat(a.filter)))},getFilterFromHome:function(t){if(t){var a=this;a.filter=t,a.pagination.current_page=1,a.count=0}},buildPageForm:function(t){var a=this,e=a.pagination;e.total_pages=Math.ceil(t/9),e.total_pages>e.current_page?e.has_next=!0:e.has_next=!1,e.current_page>1?e.has_pre=!0:e.has_pre=!1},changePage:function(t){var a=this;a.count=9*(t-1),a.pagination.current_page=t},addFav:function(t){var a=this;a.favItems.push(t),a.favItemsId.push(t.id),localStorage.setItem("favItems",JSON.stringify(a.favItems)),localStorage.setItem("favItemsId",JSON.stringify(a.favItemsId))},removeFav:function(t){var a=this,e=a.favItemsId.indexOf(t.id);a.favItems.splice(e,1),a.favItemsId.splice(e,1),localStorage.setItem("favItems",JSON.stringify(a.favItems)),localStorage.setItem("favItemsId",JSON.stringify(a.favItemsId))}},computed:{filterProducts:function(){var t=this,a=[];return"All"===t.filter?(t.buildPageForm(t.allProducts.length),t.allProducts):(a=t.allProducts.filter((function(a){return a.category.match(t.filter)})),t.buildPageForm(a.length),a)}},created:function(){var t=this;t.getFilterFromHome(t.$route.query.cate),t.getProducts()}},l=c,o=e("2877"),u=Object(o["a"])(l,s,n,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-433519de.9f7ea9c9.js.map