(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-066739bc"],{"70d5":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"mb-4"},[a("ul",{staticClass:"nav orderNav justify-content-around",on:{click:function(t){t.preventDefault()}}},[t._m(0),t._m(1),t._m(2)]),a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar bg-warning",style:{width:t.progress+"%"},attrs:{role:"progressbar","aria-valuenow":t.progress,"aria-valuemin":"0","aria-valuemax":"100"}})])])},r=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("訂單建立")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("確認付款")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("訂單完成")])])}],o={name:"orderNav",props:["progress"]},n=o,i=a("2877"),l=Object(i["a"])(n,e,r,!1,null,null,null);s["a"]=l.exports},a2e7:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}},[e("template",{slot:"default"},[e("img",{attrs:{src:a("f8b2"),alt:"loadingPhoto"}})])],2),e("div",{staticClass:"container p-4 preFadein"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-9 col m-auto"},[e("OrderNav",{attrs:{progress:t.progress}}),e("div",{staticClass:"table-responsive customerOrder"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.carts.carts,(function(s){return e("tr",{key:s.id},[e("td",{staticClass:"text-center cartImg"},[e("img",{attrs:{src:s.product.imageUrl,alt:"productPhoto"}})]),e("td",[e("router-link",{attrs:{to:"{pa}"}},[t._v(t._s(s.product.title))]),e("br"),e("span",[t._v(" "+t._s(s.qty)+" "+t._s(s.product.unit)+" ")]),s.total!==s.final_total?e("span",{staticClass:"hasCoupon"},[t._v(" "+t._s(t._f("currency")(s.total))+"元")]):t._e(),e("span",[t._v(" "+t._s(t._f("currency")(s.final_total))+"元")])],1),e("td",{staticClass:"unit"},[t._v(t._s(s.qty)+" "+t._s(s.product.unit))]),s.total!==s.final_total?e("td",{staticClass:"text-right hasCoupon"},[t._v(" "+t._s(t._f("currency")(s.total))+"元 ")]):t._e(),e("td",{staticClass:"text-right final_total"},[t._v(" "+t._s(t._f("currency")(s.final_total))+"元 ")])])})),0),e("tfoot",{attrs:{id:"couponInput"}},[e("tr",{staticClass:"d-none d-md-table-row"},[e("td",{attrs:{colspan:"3"}},[e("div",{staticClass:"useCoupon input-group py-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code.code,expression:"code.code"}],staticClass:"form-control mr-3",attrs:{type:"text",placeholder:"請輸入優惠券代碼"},domProps:{value:t.code.code},on:{input:function(s){s.target.composing||t.$set(t.code,"code",s.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-warning rounded",attrs:{type:"button"},on:{click:t.useCoupon}},[t._v(" Use it! ")])])])]),e("td",{staticClass:"h6 align-middle text-right",attrs:{colspan:"2"}},[t._v(" 小計 "+t._s(t._f("currency")(t.carts.total))+" 元 ")])]),e("tr",{staticClass:"d-md-none"},[e("td",{attrs:{colspan:"3"}},[e("div",{staticClass:"input-group input-group-sm py-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code.code,expression:"code.code"}],staticClass:"form-control mr-2",attrs:{type:"text",placeholder:"請輸入優惠券"},domProps:{value:t.code.code},on:{input:function(s){s.target.composing||t.$set(t.code,"code",s.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-warning rounded",attrs:{type:"button"},on:{click:t.useCoupon}},[t._v(" Use it! ")])])])]),e("td",{staticClass:"align-middle text-right",attrs:{colspan:"2"}},[t._v(" 小計 "+t._s(t._f("currency")(t.carts.total))+" ")])]),e("tr",[e("td",{staticClass:"text-right bg-primary text-white h5",attrs:{colspan:"5"}},[t._v(" 總金額 "+t._s(t._f("currency")(t.carts.final_total))+"元 ")])])])])]),e("div",{staticClass:"orderInfo"},[e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(s){var a=s.invalid;return[e("form",{on:{submit:function(s){return s.preventDefault(),t.creatOrder.apply(null,arguments)}}},[e("h3",{staticClass:"text-center"},[t._v("填寫收件人資料")]),e("div",{staticClass:"personalInfo form-row"},[e("div",{staticClass:"form-group col-6"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.errors,r=s.classes;return[e("label",{attrs:{for:"name"}},[t._v("姓名*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"姓名",id:"name"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group col-6"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.errors,r=s.classes;return[e("label",{attrs:{for:"tel"}},[t._v("電話*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:r,attrs:{type:"tel",name:"電話",id:"tel"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"form-group"},[e("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.errors,r=s.classes;return[e("label",{attrs:{for:"email"}},[t._v("電子信箱*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:r,attrs:{type:"email",name:"信箱",id:"email"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.errors,r=s.classes;return[e("label",{attrs:{for:"address"}},[t._v("地址*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"地址",id:"address"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"message"}},[t._v("訂單備註")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{id:"message",rows:"5"},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}})]),e("small",{staticClass:"text-primary"},[t._v("※下單前請再次確認您的購買明細及配送資訊，後續無法修正訂單內容")]),e("br"),e("small",[e("a",{attrs:{href:"#couponInput"}},[t._v("※別忘了使用您的優惠券囉!")])]),e("div",{staticClass:"text-center mt-2"},[e("button",{staticClass:"btn btn-outline-primary",class:{prohibit:a},attrs:{type:"submit",disabled:a}},[t._v(" 確認送出訂單 ")])])])]}}])})],1)],1)])])],1)},r=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",{staticClass:"thead-light"},[a("th",{attrs:{colspan:"5"}},[t._v("請確認您的訂單並使用優惠券")])])}],o=(a("99af"),a("70d5")),n={name:"customerOrder",components:{OrderNav:o["a"]},data:function(){return{code:{code:""},form:{user:{name:"",email:"",address:"",tel:""},message:""},isLoading:!1,progress:33}},methods:{getCart:function(){var t=this;t.$store.dispatch("getCart")},creatOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("storepract","/order");t.$http.post(s,{data:t.form}).then((function(s){s.data.success&&t.$router.push({name:"CustomerCheckout",params:{orderId:"".concat(s.data.orderId)}})})).catch((function(s){t.$bus.$emit("messagePush",s,"warning")}))},useCoupon:function(){var t=this;t.$store.dispatch("isLoading",!0);var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("storepract","/coupon");t.$http.post(s,{data:t.code}).then((function(s){s.data.success?t.$bus.$emit("messagePush",s.data.message,"success"):t.$bus.$emit("messagePush",s.data.message,"warning"),t.$store.dispatch("isLoading",!1),t.getCart()})).catch((function(s){t.$bus.$emit("messagePush",s,"warning"),t.$store.dispatch("isLoading",!1)}))}},computed:{carts:function(){return this.$store.state.apiCarts}},mounted:function(){setTimeout((function(){document.querySelector(".preFadein").classList.add("fadeIn")}),500)}},i=n,l=a("2877"),c=Object(l["a"])(i,e,r,!1,null,null,null);s["default"]=c.exports}}]);
//# sourceMappingURL=chunk-066739bc.2382911f.js.map